<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Admin panel</title>
  <style>
    body { background: skyblue; font-family: Arial, sans-serif; text-align: center; }
    table { margin: auto; border-collapse: collapse; width: 60%; background: white; }
    th, td { border: 1px solid black; padding: 8px; }
    th { background: lightgray; }
    input { margin: 10px; padding: 8px; }
    button { padding: 6px 12px; margin: 5px; }
  </style>
</head>
<body>
  <h1>Admin panel</h1>

  <h3>Yangi o'quvchi qo'shish</h3>
  <input type="text" id="newStudent" placeholder="Ism kiriting">
  <button onclick="addStudent()">Qo‘shish</button>

  <h3>O'quvchilar ro'yxati</h3>
  <table id="adminTable">
    <tr><th>Ism</th><th>Holat</th><th>Amal</th></tr>
  </table>

  <p><a href="index.html">⬅️ Oddiy sahifaga qaytish</a></p>

  <script>
    function loadStudents() {
      let students = JSON.parse(localStorage.getItem("students") || "[]");
      let table = document.getElementById("adminTable");
      table.innerHTML = "<tr><th>Ism</th><th>Holat</th><th>Amal</th></tr>";
      students.forEach((s, i) => {
        let row = `<tr>
          <td>${s.name}</td>
          <td>${s.status}</td>
          <td>
            <button onclick="mark(${i}, 'Keldi')">Keldi</button>
            <button onclick="mark(${i}, 'Kelmadi')">Kelmadi</button>
          </td>
        </tr>`;
        table.innerHTML += row;
      });
    }

    function addStudent() {
      let name = document.getElementById("newStudent").value;
      if (!name) return alert("Ism kiriting!");
      let students = JSON.parse(localStorage.getItem("students") || "[]");
      students.push({name: name, status: "—"});
      localStorage.setItem("students", JSON.stringify(students));
      document.getElementById("newStudent").value = "";
      loadStudents();
    }

    function mark(index, status) {
      let students = JSON.parse(localStorage.getItem("students") || "[]");
      students[index].status = status;
      localStorage.setItem("students", JSON.stringify(students));
      loadStudents();
    }

    loadStudents();
  </script>
</body>
</html>
